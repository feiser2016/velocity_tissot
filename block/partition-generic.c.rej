--- block/partition-generic.c
+++ block/partition-generic.c
@@ -309,10 +309,8 @@ struct hd_struct *add_partition(struct gendisk *disk, int partno,
 
 	if (info) {
 		struct partition_meta_info *pinfo = alloc_part_info(disk);
-		if (!pinfo) {
-			err = -ENOMEM;
+		if (!pinfo)
 			goto out_free_stats;
-		}
 		memcpy(pinfo, info, sizeof(*info));
 		p->info = pinfo;
 	}
