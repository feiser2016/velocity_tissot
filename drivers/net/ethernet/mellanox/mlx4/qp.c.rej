--- drivers/net/ethernet/mellanox/mlx4/qp.c
+++ drivers/net/ethernet/mellanox/mlx4/qp.c
@@ -355,19 +352,6 @@ static void mlx4_qp_free_icm(struct mlx4_dev *dev, int qpn)
 		__mlx4_qp_free_icm(dev, qpn);
 }
 
-struct mlx4_qp *mlx4_qp_lookup(struct mlx4_dev *dev, u32 qpn)
-{
-	struct mlx4_qp_table *qp_table = &mlx4_priv(dev)->qp_table;
-	struct mlx4_qp *qp;
-
-	spin_lock(&qp_table->lock);
-
-	qp = __mlx4_qp_lookup(dev, qpn);
-
-	spin_unlock(&qp_table->lock);
-	return qp;
-}
-
 int mlx4_qp_alloc(struct mlx4_dev *dev, int qpn, struct mlx4_qp *qp, gfp_t gfp)
 {
 	struct mlx4_priv *priv = mlx4_priv(dev);
