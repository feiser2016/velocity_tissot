--- drivers/vhost/vhost.c
+++ drivers/vhost/vhost.c
@@ -96,7 +96,8 @@ int vhost_poll_start(struct vhost_poll *poll, struct file *file)
 	if (mask)
 		vhost_poll_wakeup(&poll->wait, 0, 0, (void *)mask);
 	if (mask & POLLERR) {
-		vhost_poll_stop(poll);
+		if (poll->wqh)
+			remove_wait_queue(poll->wqh, &poll->wait);
 		ret = -EINVAL;
 	}
 
@@ -881,7 +882,6 @@ long vhost_dev_ioctl(struct vhost_dev *d, unsigned int ioctl, void __user *argp)
 		}
 		if (eventfp != d->log_file) {
 			filep = d->log_file;
-			d->log_file = eventfp;
 			ctx = d->log_ctx;
 			d->log_ctx = eventfp ?
 				eventfd_ctx_fileget(eventfp) : NULL;
