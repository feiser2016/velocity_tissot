--- include/linux/usb/gadget.h
+++ include/linux/usb/gadget.h
@@ -581,21 +581,9 @@ static inline struct usb_gadget *dev_to_usb_gadget(struct device *dev)
 	list_for_each_entry(tmp, &(gadget)->ep_list, ep_list)
 
 
-/**
- * usb_ep_align - returns @len aligned to ep's maxpacketsize.
- * @ep: the endpoint whose maxpacketsize is used to align @len
- * @len: buffer size's length to align to @ep's maxpacketsize
- *
- * This helper is used to align buffer's size to an ep's maxpacketsize.
- */
-static inline size_t usb_ep_align(struct usb_ep *ep, size_t len)
-{
-	return round_up(len, (size_t)le16_to_cpu(ep->desc->wMaxPacketSize));
-}
-
 /**
  * usb_ep_align_maybe - returns @len aligned to ep's maxpacketsize if gadget
- *	requires quirk_ep_out_aligned_size, otherwise returns len.
+ *	requires quirk_ep_out_aligned_size, otherwise reguens len.
  * @g: controller to check for quirk
  * @ep: the endpoint whose maxpacketsize is used to align @len
  * @len: buffer size's length to align to @ep's maxpacketsize
@@ -606,7 +594,8 @@ static inline struct usb_gadget *dev_to_usb_gadget(struct device *dev)
 static inline size_t
 usb_ep_align_maybe(struct usb_gadget *g, struct usb_ep *ep, size_t len)
 {
-	return g->quirk_ep_out_aligned_size ? usb_ep_align(ep, len) : len;
+	return !g->quirk_ep_out_aligned_size ? len :
+			round_up(len, (size_t)ep->desc->wMaxPacketSize);
 }
 
 /**
