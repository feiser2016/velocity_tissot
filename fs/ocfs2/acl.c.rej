--- fs/ocfs2/acl.c
+++ fs/ocfs2/acl.c
@@ -241,16 +241,20 @@ int ocfs2_set_acl(handle_t *handle,
 	case ACL_TYPE_ACCESS:
 		name_index = OCFS2_XATTR_INDEX_POSIX_ACL_ACCESS;
 		if (acl) {
-			umode_t mode;
+			umode_t mode = inode->i_mode;
+			ret = posix_acl_equiv_mode(acl, &mode);
+			if (ret < 0)
+				return ret;
+			else {
+				if (ret == 0)
+					acl = NULL;
 
-			ret = posix_acl_update_mode(inode, &mode, &acl);
-			if (ret)
-				return ret;
+				ret = ocfs2_acl_set_mode(inode, di_bh,
+							 handle, mode);
+				if (ret)
+					return ret;
 
-			ret = ocfs2_acl_set_mode(inode, di_bh,
-						 handle, mode);
-			if (ret)
-				return ret;
+			}
 		}
 		break;
 	case ACL_TYPE_DEFAULT:
