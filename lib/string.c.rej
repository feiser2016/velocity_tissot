--- lib/string.c
+++ lib/string.c
@@ -610,7 +521,7 @@ EXPORT_SYMBOL(memset);
 void memzero_explicit(void *s, size_t count)
 {
 	memset(s, 0, count);
-	barrier();
+	OPTIMIZER_HIDE_VAR(s);
 }
 EXPORT_SYMBOL(memzero_explicit);
 
